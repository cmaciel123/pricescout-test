<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PriceScout</title>

  <style>
    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      background:#0b1220;
      color:#fff;
    }
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 24px;
    }
    .card{
      background: radial-gradient(1200px 600px at 20% 10%, rgba(255,255,255,.10), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 22px;
      padding: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
    }
    .header{
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom: 12px;
    }
    .logo{
      width: 110px;
      height: 110px;
      object-fit: cover;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.25);
    }
    h1{
      margin:0;
      font-size: 44px;
      letter-spacing: .5px;
    }
    .sub{
      margin: 6px 0 18px;
      opacity:.9;
      font-size: 18px;
    }
    .row{
      display:flex;
      gap: 12px;
      align-items:center;
      margin: 14px 0 10px;
    }
    input{
      flex:1;
      padding: 16px 16px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.30);
      color:#fff;
      font-size: 18px;
      outline: none;
    }
    button{
      padding: 14px 18px;
      border-radius: 14px;
      border: 0;
      cursor:pointer;
      font-size: 18px;
      font-weight: 700;
    }
    .btn{
      background: #22c55e;
      color:#06210f;
      min-width: 140px;
    }
    .btn2{
      background: rgba(255,255,255,.10);
      color:#fff;
      border: 1px solid rgba(255,255,255,.16);
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin-top: 14px;
    }
    .box{
      background: rgba(255,255,255,.06);
      border-radius: 16px;
      padding: 14px;
      border: 1px dashed rgba(255,255,255,.16);
    }
    .title{
      font-weight: 800;
      margin: 0 0 8px;
      opacity: .95;
    }
    .store{
      display:flex;
      justify-content: space-between;
      gap: 12px;
      padding: 10px 10px;
      border-radius: 12px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.08);
      margin-bottom: 10px;
    }
    .muted{opacity:.85}
    .small{font-size: 13px; opacity:.8}
    .pill{
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(34,197,94,.18);
      border: 1px solid rgba(34,197,94,.35);
      font-weight: 800;
    }
    .warn{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      padding: 10px 12px;
      border-radius: 12px;
      margin-top: 10px;
      font-size: 14px;
      opacity:.9;
    }
    @media (max-width: 860px){
      h1{font-size: 34px}
      .grid{grid-template-columns: 1fr;}
      .header{flex-direction: column; align-items:flex-start}
      .logo{width: 96px; height: 96px}
    }
  </style>
  
</head>
.badge{
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  background: rgba(34,197,94,.14);
  border: 1px solid rgba(34,197,94,.35);
}
.badge2{
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  background: rgba(255,255,255,.10);
  border: 1px solid rgba(255,255,255,.16);
}
.badgeHot{
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 900;
  background: rgba(255,165,0,.16);
  border: 1px solid rgba(255,165,0,.35);
}

<body>
  <div class="wrap">
    <div class="card">

      <div class="header">
        <!-- âœ… Logo desde /images -->
        <img class="logo" src="images/logo.png" alt="Logo PriceScout">
        <div>
          <h1>PriceScout ðŸš€</h1>
          <div class="sub">Tu app web ya estÃ¡ en vivo con GitHub Pages. Ahora buscamos productos y guardamos precios.</div>
        </div>
      </div>

      <div class="row">
  <input id="q" placeholder="Producto (ej: leche, tortillas, arroz)..." />
</div>

<div class="row">
  <input id="zip" placeholder="ZIP (ej: 94545)" style="max-width:220px" />
  <label style="display:flex; align-items:center; gap:8px; opacity:.9;">
    <input type="checkbox" id="soloLatino" checked />
    Solo latino
  </label>

  <button class="btn" id="btnBuscar" type="button">Buscar</button>
<button class="btn2" id="btnBorrar" type="button">Borrar</button>

</div>

      </div>

      <div class="grid">
        <div class="box">
          <div class="title">âœ… Resultados</div>
          <div id="out" class="muted">Escribe un producto y presiona <b>Buscar</b>.</div>
          <div class="warn">Nota: por ahora es una <b>simulaciÃ³n</b> (sin API). En el siguiente paso lo conectamos a datos reales.</div>
        </div>

        <div class="box">
          <div class="title">ðŸ“Œ Historial</div>
          <div id="hist" class="muted">AÃºn no hay bÃºsquedas guardadas.</div>
          <div style="display:flex; gap:10px; margin-top:10px;">
            <button class="btn2" onclick="borrarHistorial()">Borrar historial</button>
          </div>
          <div class="small" style="margin-top:8px;">Se guarda en tu navegador (localStorage).</div>
        </div>
      </div>

    </div>
  </div>
  
  <script>
  // ====== CONFIG ======
  const ZIP_DEFAULT = "94545";
  const TIENDAS = [
    { nombre: "Cardenas Markets", direccion: "Hayward, CA (Ã¡rea 94545)", tipo:"Latino" },
    { nombre: "Mi Pueblo Food Center", direccion: "Hayward, CA (Ã¡rea 94545)", tipo:"Latino" },
    { nombre: "La Victoria Supermercado", direccion: "Hayward, CA (Ã¡rea 94545)", tipo:"Latino" },
    { nombre: "FoodMaxx", direccion: "Hayward, CA (Ã¡rea 94545)", tipo:"General" },
    { nombre: "Walmart Supercenter", direccion: "Hayward, CA (cerca)", tipo:"General" },
    { nombre: "Target", direccion: "Hayward, CA (cerca)", tipo:"General" }
  ];

  // ====== HELPERS ======
  function rand(min, max){
    return Math.round((Math.random() * (max - min) + min) * 100) / 100;
  }
  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // ====== LOCAL PRICES ======
  function keyPrecio(producto, tienda){
    return `precio:${producto.toLowerCase()}:${tienda.toLowerCase()}`;
  }
  function precioGuardado(producto, tienda){
    const v = localStorage.getItem(keyPrecio(producto, tienda));
    if(!v) return null;
    const n = parseFloat(v);
    return Number.isFinite(n) ? n : null;
  }
  function guardarPrecio(producto, tienda){
    const actual = precioGuardado(producto, tienda);
    const v = prompt(`Precio para "${producto}" en "${tienda}"`, actual ?? "");
    if(v === null) return;
    const n = parseFloat(String(v).replace("$",""));
    if(!Number.isFinite(n) || n <= 0){
      alert("Precio invÃ¡lido. Ej: 3.99");
      return;
    }
    localStorage.setItem(keyPrecio(producto, tienda), String(n));
    buscar();
  }

  // ====== HISTORIAL ======
  function guardarHistorial(productoLabel, mejor){
    const key = "pricescout_historial";
    const now = new Date();
    const item = {
      producto: productoLabel,
      mejorTienda: mejor.tienda,
      mejorPrecio: Number(mejor.precio.toFixed(2)),
      fecha: now.toLocaleString()
    };
    const arr = JSON.parse(localStorage.getItem(key) || "[]");
    arr.unshift(item);
    localStorage.setItem(key, JSON.stringify(arr.slice(0, 15)));
  }
  function renderHistorial(){
    const el = document.getElementById("hist");
    if(!el) return;
    const arr = JSON.parse(localStorage.getItem("pricescout_historial") || "[]");
    if(arr.length === 0){
      el.innerHTML = "AÃºn no hay bÃºsquedas guardadas.";
      return;
    }
    el.innerHTML = arr.map(x => `
      <div class="store">
        <div>
          <div><b>${escapeHtml(x.producto)}</b></div>
          <div class="small muted">${escapeHtml(x.fecha)}</div>
        </div>
        <div style="text-align:right">
          <div class="pill">$${Number(x.mejorPrecio).toFixed(2)}</div>
          <div class="small muted">${escapeHtml(x.mejorTienda)}</div>
        </div>
      </div>
    `).join("");
  }
  function borrarHistorial(){
    localStorage.removeItem("pricescout_historial");
    renderHistorial();
  }

  // ====== ACTIONS ======
  function limpiar(){
    const q = document.getElementById("q");
    const zip = document.getElementById("zip");
    if(q) q.value = "";
    if(zip) zip.value = "";
    const out = document.getElementById("out");
    if(out) out.innerHTML = 'Escribe un producto y presiona <b>Buscar</b>.';
  }

  function buscar(){
    const qEl = document.getElementById("q");
    const zipEl = document.getElementById("zip");
    const soloLatinoEl = document.getElementById("soloLatino");
    const out = document.getElementById("out");

    const q = (qEl ? qEl.value : "").trim();
    const zip = (zipEl ? zipEl.value : "").trim() || ZIP_DEFAULT;
    const soloLatino = soloLatinoEl ? soloLatinoEl.checked : false;

    if(!out) return;
    if(!q){
      out.innerHTML = "âš ï¸ Escribe un producto primero.";
      return;
    }

    const tiendasFiltradas = TIENDAS.filter(t => soloLatino ? t.tipo === "Latino" : true);

    const resultados = tiendasFiltradas.map(t => {
      const p = precioGuardado(q, t.nombre);
      return {
        tienda: t.nombre,
        direccion: t.direccion,
        zip,
        tipo: t.tipo,     // âœ…
        precio: (p ?? rand(1.49, 9.99))
      };
    }).sort((a,b)=>a.precio-b.precio);

   out.innerHTML = resultados.map((r, i) => `
  <div class="store">
    <div>
      <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
        <b>${escapeHtml(r.tienda)}</b>
        <span class="badge">${escapeHtml(r.tipo || "Tienda")}</span>
        <span class="badge2">ZIP ${escapeHtml(r.zip)}</span>
        ${i===0 ? `<span class="badgeHot">ðŸ”¥ MÃ¡s barato</span>` : ``}
      </div>

      <div class="small muted">${escapeHtml(r.direccion)}</div>
      <div class="small">Producto: <span class="muted">${escapeHtml(q)}</span></div>
    </div>

    <div style="text-align:right">
      <div class="pill">$${r.precio.toFixed(2)}</div>
      <button class="btn2" type="button" style="margin-top:8px; padding:8px 10px;"
        data-tienda="${escapeHtml(r.tienda)}" data-producto="${escapeHtml(q)}">
        Agregar precio
      </button>
    </div>
  </div>


    `).join("");

    // Conectar botones "Agregar precio" (por delegaciÃ³n simple)
    out.querySelectorAll("button[data-tienda]").forEach(btn => {
      btn.addEventListener("click", () => {
        const tienda = btn.getAttribute("data-tienda");
        const producto = btn.getAttribute("data-producto");
        guardarPrecio(producto, tienda);
      });
    });

    guardarHistorial(`${q} (ZIP ${zip})`, { tienda: resultados[0].tienda, precio: resultados[0].precio });
    renderHistorial();
  }

  // ====== BIND BUTTONS ======
  document.addEventListener("DOMContentLoaded", () => {
    // Prueba rÃ¡pida: si esto corre, el JS estÃ¡ bien cargado
    console.log("PriceScout JS OK âœ…");

    const b1 = document.getElementById("btnBuscar");
    const b2 = document.getElementById("btnBorrar");
    const b3 = document.getElementById("btnBorrarHist");

    if(b1) b1.addEventListener("click", buscar);
    if(b2) b2.addEventListener("click", limpiar);

    renderHistorial();
  });
</script>


  
</script>

</body>
</html>

